{% extends "base.html" %}

{% block title %}{{ product.name }} - Ayurshop{% endblock %}
{% block bottom_nav %}{% endblock %}

{% block content %}

<style>
    /* ===============================================
       PREMIUM PRODUCT PAGE - MOBILE FIRST DESIGN
       =============================================== */
    
    :root {
        --primary-green: #2d6a4f;
        --primary-green-light: #52b788;
        --primary-green-dark: #1b4332;
        --accent: #95d5b2;
        --primary-blue: #007bff;
        --primary-blue-dark: #0056b3;
        --text-dark: #1a1a1a;
        --text-medium: #333;
        --text-gray: #666;
        --text-light: #999;
        --border-light: #e0e0e0;
        --bg-light: #f8f9fa;
        --bg-white: #ffffff;
        --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
        --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
        --shadow-lg: 0 8px 24px rgba(45,106,79,0.15);
        --glow: 0 0 20px rgba(82,183,136,0.3);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-fast: all 0.15s ease;
    }

    * { 
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        color: var(--text-dark);
        line-height: 1.6;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9f5f0 100%);
    }

    .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 12px;
    }

    /* ===============================================
       HEADER SECTION - MOBILE FIRST
       =============================================== */
    
    .product-header { 
        margin-bottom: 16px;
        animation: fadeInDown 0.6s ease;
        padding: 12px 0;
    }

    @keyframes fadeInDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .product-title {
        font-size: 20px;
        font-weight: 800;
        color: var(--text-dark);
        margin: 10px 0 10px 0;
        line-height: 1.3;
        letter-spacing: -0.02em;
    }

    .product-meta {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 8px;
    }

    .brand-tag {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 11px;
        color: var(--primary-green);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 700;
        padding: 6px 12px;
        background: linear-gradient(135deg, rgba(82, 183, 136, 0.15) 0%, rgba(45, 106, 79, 0.1) 100%);
        border-radius: 50px;
        transition: var(--transition);
        border: 1.5px solid rgba(82, 183, 136, 0.3);
        box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }

    .brand-tag:hover {
        background: linear-gradient(135deg, rgba(82, 183, 136, 0.25) 0%, rgba(45, 106, 79, 0.15) 100%);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .rating-section {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        background: var(--bg-white);
        border-radius: 50px;
        box-shadow: 0 1px 4px rgba(0,0,0,0.06);
        border: 1.5px solid var(--border-light);
        transition: var(--transition);
    }

    .rating-section:hover {
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border-color: #ffa500;
    }

    .stars { 
        color: #ffa500; 
        font-size: 14px; 
        letter-spacing: 1px;
        text-shadow: 0 1px 2px rgba(255, 165, 0, 0.2);
    }

    .rating-text { 
        font-size: 13px; 
        font-weight: 700;
        color: var(--text-dark);
    }

    .review-count { 
        font-size: 12px; 
        color: var(--text-gray);
        transition: var(--transition);
        cursor: pointer;
        font-weight: 500;
    }

    .review-count:hover {
        color: var(--primary-blue);
        text-decoration: underline;
    }

    /* ===============================================
       MAIN CONTAINER - MOBILE FIRST
       =============================================== */

    .product-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 16px;
    }

    /* ===============================================
       IMAGE GALLERY - MOBILE OPTIMIZED
       =============================================== */

    .image-gallery {
        position: relative;
        animation: fadeInLeft 0.6s ease;
    }

    @keyframes fadeInLeft {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .main-image-container {
        position: relative;
        width: 100%;
        height: 280px;
        border-radius: 12px;
        overflow: hidden;
        background: linear-gradient(135deg, #ffffff 0%, #f0f7f4 100%);
        box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        margin-bottom: 12px;
        border: 1.5px solid var(--border-light);
        transition: var(--transition);
    }

    .main-image-container:hover {
        box-shadow: 0 4px 16px rgba(45,106,79,0.15);
        border-color: var(--primary-green-light);
    }

    .main-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        background: white;
        padding: 12px;
    }

    .main-image.zoom {
        transform: scale(1.05);
    }

    /* Navigation Arrows - Mobile Optimized */
    .nav-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.95);
        border: 1.5px solid var(--border-light);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        transition: var(--transition);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        backdrop-filter: blur(8px);
    }

    .nav-arrow:active {
        transform: translateY(-50%) scale(0.9);
    }

    .nav-arrow:hover {
        background: var(--primary-green);
        border-color: var(--primary-green);
        box-shadow: 0 3px 12px rgba(45,106,79,0.25);
    }

    .nav-arrow:hover svg {
        stroke: white;
    }

    .nav-arrow.disabled {
        opacity: 0.3;
        cursor: not-allowed;
        pointer-events: none;
    }

    .nav-arrow-left {
        left: 8px;
    }

    .nav-arrow-right {
        right: 8px;
    }

    .nav-arrow svg {
        width: 16px;
        height: 16px;
        stroke: var(--text-dark);
        stroke-width: 3;
        fill: none;
        transition: var(--transition);
    }

    /* Image Counter - Mobile Optimized */
    .image-counter {
        position: absolute;
        bottom: 12px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.75);
        color: white;
        padding: 4px 12px;
        border-radius: 50px;
        font-size: 11px;
        font-weight: 700;
        backdrop-filter: blur(8px);
        z-index: 10;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        border: 1px solid rgba(255,255,255,0.2);
    }

    /* Thumbnail Gallery - Mobile Optimized */
    .thumb-row {
        display: flex;
        gap: 8px;
        overflow-x: auto;
        padding: 4px 2px;
        scrollbar-width: thin;
        scrollbar-color: var(--primary-green-light) transparent;
        -webkit-overflow-scrolling: touch;
    }

    .thumb-row::-webkit-scrollbar {
        height: 6px;
    }

    .thumb-row::-webkit-scrollbar-track {
        background: var(--bg-light);
        border-radius: 3px;
    }

    .thumb-row::-webkit-scrollbar-thumb {
        background: var(--primary-green-light);
        border-radius: 3px;
    }

    .thumb-row::-webkit-scrollbar-thumb:hover {
        background: var(--primary-green);
    }

    .thumb-row img {
        flex-shrink: 0;
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 8px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: var(--transition);
        background: white;
        padding: 4px;
        box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }

    .thumb-row img:hover {
        transform: translateY(-2px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border-color: var(--primary-green-light);
    }

    .thumb-row img.active {
        border-color: var(--primary-green);
        box-shadow: 0 2px 8px rgba(45,106,79,0.2), 0 0 0 1px var(--primary-green);
        transform: scale(1.05);
    }

    /* ===============================================
       PRODUCT INFO - MOBILE OPTIMIZED
       =============================================== */

    .product-info {
        animation: fadeInRight 0.6s ease;
    }

    @keyframes fadeInRight {
        from {
            opacity: 0;
            transform: translateX(30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    /* Stock Badges - Mobile Optimized */
    .badge-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 14px;
    }

    .stock-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 50px;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        transition: var(--transition);
        box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }

    .stock-ok { 
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        color: #155724;
        border: 1.5px solid #c3e6cb;
    }

    .stock-ok:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .stock-low { 
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        color: #856404;
        border: 1.5px solid #ffeaa7;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); box-shadow: 0 1px 4px rgba(0,0,0,0.06); }
        50% { transform: scale(1.03); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    }

    .stock-out { 
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        color: #721c24;
        border: 1.5px solid #f5c6cb;
    }

    /* Price Section - Mobile Optimized */
    .price-section {
        margin: 16px 0;
        padding: 16px;
        background: linear-gradient(135deg, #ffffff 0%, #f0f7f4 100%);
        border-radius: 12px;
        border: 1.5px solid var(--border-light);
        box-shadow: 0 2px 12px rgba(0,0,0,0.08);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
    }

    .price-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 12px;
        padding: 1.5px;
        background: linear-gradient(135deg, var(--primary-green-light), var(--accent));
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.4s ease;
        pointer-events: none;
    }

    .price-section:hover {
        box-shadow: 0 4px 16px rgba(45,106,79,0.15);
        border-color: var(--primary-green-light);
        transform: translateY(-2px);
    }

    .price-section:hover::before {
        opacity: 1;
    }

    .price-original {
        color: var(--text-light);
        font-size: 14px;
        text-decoration: line-through;
        margin-bottom: 4px;
        display: block;
        font-weight: 500;
    }

    .price-value {
        font-size: 32px;
        font-weight: 900;
        color: var(--text-dark);
        margin: 4px 0;
        letter-spacing: -0.03em;
        background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-green-light) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .price-discount {
        display: inline-block;
        background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-green-light) 100%);
        color: white;
        padding: 4px 10px;
        border-radius: 50px;
        font-size: 12px;
        font-weight: 800;
        margin-left: 8px;
        vertical-align: middle;
        box-shadow: 0 2px 8px rgba(45,106,79,0.2);
    }

    .delivery-info {
        font-size: 12px;
        color: var(--text-gray);
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1.5px solid var(--border-light);
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 500;
    }

    .delivery-info::before {
        content: "üöö";
        font-size: 16px;
    }

    /* Description - Mobile Optimized */
    .product-description {
        white-space: pre-wrap;
        line-height: 1.7;
        color: var(--text-medium);
        margin: 16px 0;
        font-size: 13px;
        padding: 14px;
        background: var(--bg-white);
        border-radius: 12px;
        border: 1.5px solid var(--border-light);
        box-shadow: 0 1px 4px rgba(0,0,0,0.06);
        transition: var(--transition);
    }

    .product-description:hover {
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border-color: rgba(82, 183, 136, 0.3);
    }

    /* ===============================================
       BUTTONS - MOBILE OPTIMIZED
       =============================================== */

    .button-group {
        display: grid;
        gap: 10px;
        margin-top: 20px;
    }

    .btn-wrapper {
        text-decoration: none;
        display: block;
        width: 100%;
    }

    .btn {
        width: 100%;
        padding: 14px 20px;
        font-size: 15px;
        font-weight: 800;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        text-decoration: none;
        box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        position: relative;
        overflow: hidden;
        z-index: 1;
    }

    .btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
        z-index: -1;
    }

    .btn:active::before {
        width: 400px;
        height: 400px;
    }

    .btn span:first-child {
        font-size: 18px;
    }

    .btn-cart { 
        background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-green-light) 100%);
        color: white;
        border: 1.5px solid var(--primary-green);
    }

    .btn-cart:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(45,106,79,0.3);
    }

    .btn-cart:active {
        transform: translateY(0);
    }

    .btn-buy { 
        background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-dark) 100%);
        color: white;
        border: 1.5px solid var(--primary-blue);
    }

    .btn-buy:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 123, 255, 0.3);
    }

    .btn-buy:active {
        transform: translateY(0);
    }

    .btn-disabled { 
        background: linear-gradient(135deg, #ccc 0%, #999 100%);
        cursor: not-allowed;
        opacity: 0.6;
        border: 1.5px solid #999;
    }

    .btn-disabled:hover {
        transform: none;
        box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }

    /* ===============================================
       PRODUCT ACCORDION
       =============================================== */

    .product-accordion {
        margin: 20px 0;
        border-radius: 12px;
        overflow: hidden;
        border: 1.5px solid var(--border-light);
        background: var(--bg-white);
    }

    .accordion-item + .accordion-item {
        border-top: 1.5px solid var(--border-light);
    }

    .accordion-header {
        width: 100%;
        background: var(--bg-white);
        border: none;
        padding: 16px;
        font-size: 14px;
        font-weight: 700;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        text-align: left;
    }

    .accordion-icon {
        font-size: 16px;
        transition: transform 0.3s ease;
    }

    .accordion-item.active .accordion-icon {
        transform: rotate(180deg);
    }

    .accordion-content {
        max-height: 0;
        overflow: hidden;
        padding: 0 16px;
        font-size: 13px;
        line-height: 1.7;
        color: var(--text-medium);
        transition: max-height 0.35s ease, padding 0.35s ease;
        white-space: pre-wrap;
    }

    .accordion-item.active .accordion-content {
        max-height: 600px;
        padding: 12px 16px 18px;
    }

    /* ===============================================
       TABLET BREAKPOINT (768px+)
       =============================================== */

    @media (min-width: 768px) {
        .container {
            padding: 0 16px;
        }

        .product-header {
            margin-bottom: 24px;
            padding: 16px 0;
        }

        .product-title {
            font-size: 28px;
            margin: 14px 0 12px 0;
        }

        .brand-tag {
            font-size: 12px;
            padding: 8px 14px;
        }

        .rating-section {
            padding: 7px 14px;
        }

        .stars {
            font-size: 16px;
        }

        .rating-text {
            font-size: 15px;
        }

        .review-count {
            font-size: 13px;
        }

        .product-container { 
            grid-template-columns: 1fr 1fr;
            gap: 36px;
            margin-top: 20px;
        }
        
        .main-image-container { 
            height: 420px;
            border-radius: 16px;
            margin-bottom: 16px;
            border: 2px solid var(--border-light);
        }

        .main-image {
            padding: 16px;
        }

        .nav-arrow {
            width: 44px;
            height: 44px;
            border: 2px solid var(--border-light);
        }

        .nav-arrow-left {
            left: 10px;
        }

        .nav-arrow-right {
            right: 10px;
        }

        .nav-arrow svg {
            width: 20px;
            height: 20px;
        }

        .image-counter {
            padding: 6px 14px;
            font-size: 12px;
            bottom: 16px;
        }

        .thumb-row {
            gap: 10px;
            padding: 6px 3px;
        }

        .thumb-row img {
            width: 75px;
            height: 75px;
            border-radius: 10px;
            padding: 5px;
        }

        .badge-container {
            gap: 9px;
            margin-bottom: 16px;
        }

        .stock-badge {
            padding: 8px 14px;
            font-size: 12px;
            border: 2px solid;
        }

        .price-section {
            margin: 20px 0;
            padding: 20px;
            border-radius: 16px;
            border: 2px solid var(--border-light);
        }

        .price-original {
            font-size: 16px;
            margin-bottom: 6px;
        }

        .price-value {
            font-size: 40px;
            margin: 6px 0;
        }

        .price-discount {
            padding: 5px 12px;
            font-size: 13px;
            margin-left: 9px;
        }

        .delivery-info {
            font-size: 13px;
            margin-top: 14px;
            padding-top: 14px;
            gap: 7px;
        }

        .delivery-info::before {
            font-size: 18px;
        }

        .product-description {
            margin: 20px 0;
            font-size: 14px;
            padding: 18px;
            border-radius: 14px;
            border: 2px solid var(--border-light);
        }

        .accordion-header {
            padding: 18px;
            font-size: 15px;
        }

        .accordion-content {
            padding: 0 18px;
            font-size: 14px;
        }

        .accordion-item.active .accordion-content {
            padding: 14px 18px 20px;
        }

        .button-group {
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            padding: 16px 24px;
            font-size: 16px;
            border-radius: 14px;
        }

        .btn span:first-child {
            font-size: 19px;
        }
    }

    /* ===============================================
       DESKTOP BREAKPOINT (1024px+)
       =============================================== */

    @media (min-width: 1024px) {
        .product-header {
            margin-bottom: 28px;
            padding: 20px 0;
        }

        .product-title {
            font-size: 36px;
            margin: 16px 0 12px 0;
        }

        .brand-tag {
            font-size: 13px;
            padding: 10px 16px;
            border: 2px solid rgba(82, 183, 136, 0.3);
        }

        .rating-section {
            padding: 8px 16px;
            border: 2px solid var(--border-light);
        }

        .stars {
            font-size: 18px;
            letter-spacing: 2px;
        }

        .rating-text {
            font-size: 16px;
        }

        .review-count {
            font-size: 14px;
        }

        .product-container { 
            gap: 64px;
            margin-top: 24px;
        }

        .main-image-container { 
            height: 600px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg), var(--glow);
        }

        .main-image {
            padding: 20px;
        }

        .main-image:hover {
            transform: scale(1.02);
        }

        .nav-arrow {
            width: 48px;
            height: 48px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .nav-arrow:hover {
            box-shadow: 0 6px 20px rgba(45,106,79,0.35);
        }

        .nav-arrow-left {
            left: 12px;
        }

        .nav-arrow-right {
            right: 12px;
        }

        .nav-arrow svg {
            width: 22px;
            height: 22px;
        }

        .image-counter {
            padding: 8px 18px;
            font-size: 14px;
            bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.2);
        }

        .thumb-row {
            gap: 12px;
            padding: 8px 4px;
            scrollbar-width: thin;
        }

        .thumb-row::-webkit-scrollbar {
            height: 8px;
        }

        .thumb-row img {
            width: 90px;
            height: 90px;
            border-radius: 12px;
            border: 3px solid transparent;
            padding: 6px;
            box-shadow: var(--shadow-sm);
        }

        .thumb-row img:hover {
            box-shadow: var(--shadow-md);
        }

        .thumb-row img.active {
            box-shadow: 0 4px 16px rgba(45,106,79,0.3), 0 0 0 1px var(--primary-green);
        }

        .badge-container {
            gap: 10px;
            margin-bottom: 20px;
        }

        .stock-badge {
            padding: 10px 16px;
            font-size: 13px;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-sm);
        }

        .stock-ok:hover {
            box-shadow: var(--shadow-md);
        }

        .stock-low {
            box-shadow: var(--shadow-sm);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: var(--shadow-sm); }
            50% { transform: scale(1.05); box-shadow: var(--shadow-md); }
        }

        .price-section {
            margin: 24px 0;
            padding: 28px;
            border-radius: 20px;
            border: 2px solid var(--border-light);
            box-shadow: var(--shadow-md);
        }

        .price-section:hover {
            box-shadow: var(--shadow-lg), var(--glow);
            transform: translateY(-4px);
        }

        .price-original {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .price-value {
            font-size: 48px;
            margin: 8px 0;
        }

        .price-discount {
            padding: 6px 14px;
            font-size: 14px;
            margin-left: 10px;
            box-shadow: 0 4px 12px rgba(45,106,79,0.3);
        }

        .delivery-info {
            font-size: 14px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 2px solid var(--border-light);
            gap: 8px;
        }

        .delivery-info::before {
            font-size: 20px;
        }

        .product-description {
            margin: 24px 0;
            font-size: 15px;
            padding: 24px;
            line-height: 1.8;
            border-radius: 16px;
            border: 2px solid var(--border-light);
            box-shadow: var(--shadow-sm);
        }

        .product-description:hover {
            box-shadow: var(--shadow-md);
        }

        .accordion-header {
            padding: 20px;
            font-size: 16px;
        }

        .accordion-content {
            padding: 0 20px;
            font-size: 15px;
        }

        .accordion-item.active .accordion-content {
            padding: 16px 20px 24px;
        }

        .button-group {
            margin-top: 28px;
        }

        .btn {
            padding: 18px 28px;
            font-size: 17px;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
        }

        .btn span:first-child {
            font-size: 20px;
        }

        .btn-cart:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(45,106,79,0.4), var(--glow);
        }

        .btn-buy:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(0, 123, 255, 0.4);
        }

        .btn-disabled:hover {
            box-shadow: var(--shadow-sm);
        }
    }

    /* ===============================================
       ACCESSIBILITY
       =============================================== */

    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* Focus styles for keyboard navigation */
    .btn:focus-visible,
    .nav-arrow:focus-visible,
    .thumb-row img:focus-visible,
    .accordion-header:focus-visible {
        outline: 3px solid var(--primary-blue);
        outline-offset: 3px;
    }

    /* High contrast mode improvements */
    @media (prefers-contrast: high) {
        .btn {
            border: 3px solid currentColor;
        }
    }

    /* Loading animation */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .container {
        animation: fadeIn 0.6s ease;
    }
</style>

<div class="container">
    <!-- HEADER -->
    <div class="product-header">
        <div class="brand-tag">üåø Ayurvedic Product ¬∑ Premium Quality</div>
        <h1 class="product-title">{{ product.name }}</h1>

        <div class="product-meta">
            <div class="rating-section">
                <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                <span class="rating-text">{{ product.rating }}</span>
                <span class="review-count" role="button" tabindex="0">{{ product.rating_count }} reviews</span>
            </div>
        </div>
    </div>

    <div class="product-container">

        <!-- IMAGE GALLERY -->
        <div class="image-gallery">
            <div class="main-image-container">
                {% set main_img = product.images[0] if product.images else 'default.png' %}
                <img id="mainImage"
                     src="{{ url_for('static', filename='images/' ~ main_img) }}"
                     class="main-image"
                     alt="{{ product.name }}">

                <!-- Navigation Arrows -->
                <button class="nav-arrow nav-arrow-left" 
                        id="prevBtn" 
                        onclick="navigateImage(-1)"
                        aria-label="Previous image">
                    <svg viewBox="0 0 24 24">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>

                <button class="nav-arrow nav-arrow-right" 
                        id="nextBtn" 
                        onclick="navigateImage(1)"
                        aria-label="Next image">
                    <svg viewBox="0 0 24 24">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </button>

                <!-- Image Counter -->
                <div class="image-counter" id="imageCounter">1 / {{ product.images|length }}</div>
            </div>

            <!-- Thumbnails -->
            <div class="thumb-row" id="thumbRow">
                {% for img in product.images %}
                <img src="{{ url_for('static', filename='images/' ~ img) }}"
                     class="{% if loop.index0 == 0 %}active{% endif %}"
                     data-index="{{ loop.index0 }}"
                     onclick="changeImage(this)"
                     alt="Product view {{ loop.index }}"
                     tabindex="0"
                     role="button">
                {% endfor %}
            </div>
        </div>

        <!-- PRODUCT INFO -->
        <div class="product-info">

            <!-- Badges -->
            <div class="badge-container">
                {% if product.stock == 0 %}
                    <span class="stock-badge stock-out">‚ùå OUT OF STOCK</span>
                {% elif product.stock <= 3 %}
                    <span class="stock-badge stock-low">‚ö†Ô∏è Only {{ product.stock }} left</span>
                {% else %}
                    <span class="stock-badge stock-ok">‚úÖ In Stock</span>
                {% endif %}

                {% if product.badges %}
                    {% for badge in product.badges %}
                        <span class="stock-badge stock-ok">üèÜ {{ badge }}</span>
                    {% endfor %}
                {% endif %}
            </div>

            <!-- Price -->
            <div class="price-section">
                {% if product.mrp and product.mrp > product.price %}
                    <span class="price-original">MRP: ‚Çπ{{ product.mrp }}</span>
                    {% set discount = ((product.mrp - product.price) / product.mrp * 100)|round|int %}
                    <div>
                        <span class="price-value">‚Çπ{{ product.price }}</span>
                        <span class="price-discount">{{ discount }}% OFF</span>
                    </div>
                {% else %}
                    <div class="price-value">‚Çπ{{ product.price }}</div>
                {% endif %}

                <div class="delivery-info">
                    Delivered in {{ product.delivery_days }} days ¬∑ Inclusive of all taxes
                </div>
            </div>

            <!-- Product Details Accordion -->
            <div class="product-accordion">

                <div class="accordion-item active">
                    <button class="accordion-header">
                        Product Description
                        <span class="accordion-icon">‚åÑ</span>
                    </button>
                    <div class="accordion-content">
                        {{ product.description }}
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        Ingredients
                        <span class="accordion-icon">‚åÑ</span>
                    </button>
                    <div class="accordion-content">
                        {{ product.ingredients }}
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        Nutrition
                        <span class="accordion-icon">‚åÑ</span>
                    </button>
                    <div class="accordion-content">
                        {{ product.nutrition }}
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        Dosage
                        <span class="accordion-icon">‚åÑ</span>
                    </button>
                    <div class="accordion-content">
                        {{ product.dosage }}
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        Additional Info
                        <span class="accordion-icon">‚åÑ</span>
                    </button>
                    <div class="accordion-content">
                        {{ product.additional_info }}
                    </div>
                </div>

            </div>

            <!-- Buttons -->
            <div class="button-group">
                {% if product.stock == 0 %}
                    <button class="btn btn-cart btn-disabled" disabled>
                        <span>üõí</span>
                        <span>Out of Stock</span>
                    </button>
                    <button class="btn btn-buy btn-disabled" disabled>
                        <span>‚ö°</span>
                        <span>Buy Now</span>
                    </button>
                {% else %}
                    <a href="{{ url_for('main.add_to_cart', product_id=product.id) }}" class="btn-wrapper">
                        <button class="btn btn-cart">
                            <span>üõí</span>
                            <span>Add to Cart</span>
                        </button>
                    </a>
                    <a href="{{ url_for('main.buy_now', product_id=product.id) }}" class="btn-wrapper">
                        <button class="btn btn-buy">
                            <span>‚ö°</span>
                            <span>Buy Now</span>
                        </button>
                    </a>
                {% endif %}
            </div>

        </div>

    </div>
</div>

<script>
    // Image gallery state
    let currentImageIndex = 0;
    const images = document.querySelectorAll('.thumb-row img');
    const totalImages = images.length;

    // Change image and update UI
    function changeImage(element) {
        const mainImg = document.getElementById('mainImage');
        const newIndex = parseInt(element.dataset.index);
        
        // Add zoom effect
        mainImg.classList.add('zoom');
        setTimeout(() => mainImg.classList.remove('zoom'), 500);
        
        // Update main image
        mainImg.src = element.src;
        
        // Update active thumbnail
        images.forEach(img => img.classList.remove('active'));
        element.classList.add('active');
        
        // Update current index
        currentImageIndex = newIndex;
        
        // Update counter and navigation
        updateImageCounter();
        updateNavigationButtons();
        
        // Scroll thumbnail into view
        element.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
    }

    // Navigate between images
    function navigateImage(direction) {
        const newIndex = currentImageIndex + direction;
        
        if (newIndex >= 0 && newIndex < totalImages) {
            changeImage(images[newIndex]);
        }
    }

    // Update image counter
    function updateImageCounter() {
        const counter = document.getElementById('imageCounter');
        if (counter) {
            counter.textContent = `${currentImageIndex + 1} / ${totalImages}`;
        }
    }

    // Update navigation button states
    function updateNavigationButtons() {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        if (prevBtn) {
            prevBtn.classList.toggle('disabled', currentImageIndex === 0);
        }
        
        if (nextBtn) {
            nextBtn.classList.toggle('disabled', currentImageIndex === totalImages - 1);
        }
    }

    // Keyboard navigation for thumbnails
    images.forEach(img => {
        img.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                changeImage(img);
            }
        });
    });

    // Keyboard navigation for main image (arrow keys)
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
            navigateImage(-1);
        } else if (e.key === 'ArrowRight') {
            navigateImage(1);
        }
    });

    // Touch swipe support for mobile
    let touchStartX = 0;
    let touchEndX = 0;
    
    const mainImageContainer = document.querySelector('.main-image-container');
    
    if (mainImageContainer) {
        mainImageContainer.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });
        
        mainImageContainer.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, { passive: true });
    }
    
    function handleSwipe() {
        const swipeThreshold = 50;
        const diff = touchStartX - touchEndX;
        
        if (Math.abs(diff) > swipeThreshold) {
            if (diff > 0) {
                // Swipe left - next image
                navigateImage(1);
            } else {
                // Swipe right - previous image
                navigateImage(-1);
            }
        }
    }

    // Initialize navigation buttons on page load
    updateNavigationButtons();

    // Accordion toggle
    document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', () => {
            const currentItem = header.parentElement;

            document.querySelectorAll('.accordion-item').forEach(item => {
                if (item !== currentItem) {
                    item.classList.remove('active');
                }
            });

            currentItem.classList.toggle('active');
        });
    });
</script>

{% endblock %}